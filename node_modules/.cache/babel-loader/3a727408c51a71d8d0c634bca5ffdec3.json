{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sns\\\\src\\\\Component\\\\StoryItem\\\\StoryItemBody\\\\StoryItemBody.js\";\nimport * as React from 'react';\nimport { MyMenu } from \"../../MyMenu/MyMenu\";\nimport Lightbox from \"react-image-lightbox\";\nexport default class StoryItemBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      photoIndex: 0,\n      isOpen: false\n    };\n    this.contents = React.createRef();\n    this.nowUserInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  }\n\n  render() {\n    const postData = this.props.postData;\n    const _this$state = this.state,\n          photoIndex = _this$state.photoIndex,\n          isOpen = _this$state.isOpen;\n    let fileArr = [];\n\n    if (postData.file !== null) {\n      Array(Number(postData.filecnt)).fill(0).forEach((v, i) => {\n        fileArr.push(`/php/downloadImage.php?id=${postData.file}&subid=${i}`);\n      });\n    } // console.log(postData);\n\n\n    if (this.contents.current) {\n      this.contents.current.innerHTML = unescape(postData.contents);\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"storyContentsWrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontSize: \"14px\",\n        wordBreak: \"break-all\"\n      },\n      ref: this.contents,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }), fileArr !== null ? fileArr.length > 4 ? fileArr.slice(4).map((v, i) => React.createElement(\"div\", {\n      style: {\n        backgroundImage: `url(${v})`\n      },\n      key: i,\n      onClick: () => this.setState({\n        isOpen: true,\n        photoIndex: i\n      }),\n      className: \"storyImgSide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    })) : fileArr.map((v, i) => React.createElement(\"div\", {\n      style: {\n        backgroundImage: `url(${v})`\n      },\n      key: i,\n      onClick: () => this.setState({\n        isOpen: true,\n        photoIndex: i\n      }),\n      className: fileArr.length === 3 ? i === 0 ? \"storyImgBig\" : i === 1 ? \"storyImgSide absolute\" : \"storyImgSide\" : fileArr.length === 1 ? \"storyImgBiger\" : \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })) : null, fileArr !== null && isOpen ? React.createElement(Lightbox, {\n      mainSrc: fileArr[photoIndex],\n      nextSrc: fileArr[(photoIndex + 1) % fileArr.length],\n      prevSrc: fileArr[(photoIndex + fileArr.length - 1) % fileArr.length],\n      onCloseRequest: () => this.setState({\n        isOpen: false\n      }),\n      onMovePrevRequest: () => this.setState({\n        photoIndex: (photoIndex + fileArr.length - 1) % fileArr.length\n      }),\n      onMoveNextRequest: () => this.setState({\n        photoIndex: (photoIndex + 1) % fileArr.length\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }) : null));\n  }\n\n}\n;","map":{"version":3,"sources":["C:/xampp/htdocs/sns/src/Component/StoryItem/StoryItemBody/StoryItemBody.js"],"names":["React","MyMenu","Lightbox","StoryItemBody","Component","constructor","props","state","photoIndex","isOpen","contents","createRef","nowUserInfo","JSON","parse","localStorage","getItem","render","postData","fileArr","file","Array","Number","filecnt","fill","forEach","v","i","push","current","innerHTML","unescape","fontSize","wordBreak","length","slice","map","backgroundImage","setState"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {MyMenu} from \"../../MyMenu/MyMenu\";\r\nimport Lightbox from \"react-image-lightbox\";\r\n\r\nexport default class StoryItemBody extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      photoIndex: 0,\r\n      isOpen: false,\r\n    };\r\n    this.contents = React.createRef();\r\n    this.nowUserInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  }\r\n\r\n\r\n  render() {\r\n    const {postData} = this.props;\r\n    const {photoIndex, isOpen} = this.state;\r\n    let fileArr = [];\r\n    if (postData.file !== null) {\r\n      Array(Number(postData.filecnt)).fill(0).forEach((v, i) => {\r\n        fileArr.push(`/php/downloadImage.php?id=${postData.file}&subid=${i}`);\r\n      })\r\n    }\r\n    // console.log(postData);\r\n    if (this.contents.current) {\r\n      this.contents.current.innerHTML = unescape(postData.contents);\r\n    }\r\n    return (\r\n      <div>\r\n        <div className=\"storyContentsWrap\">\r\n          <div style={{fontSize: \"14px\", wordBreak: \"break-all\"}} ref={this.contents}/>\r\n          {/*<div className=\"storyitem_font_style\" style={{cursor:\"pointer\"}}>...더보기</div>*/}\r\n\r\n          {\r\n            (fileArr !== null) ?\r\n              (fileArr.length > 4) ?\r\n                fileArr.slice(4).map((v,i) =>\r\n                  (\r\n                    <div style={{backgroundImage: `url(${v})`}} key={i}\r\n                         onClick={() => this.setState({isOpen: true, photoIndex: i})}\r\n                         className=\"storyImgSide\"/>\r\n                  )\r\n                ) :\r\n                fileArr.map((v, i) => (\r\n                  <div style={{backgroundImage: `url(${v})`}} key={i}\r\n                       onClick={() => this.setState({isOpen: true, photoIndex: i})}\r\n                       className={(fileArr.length === 3 ?\r\n                         (i === 0) ?\r\n                           \"storyImgBig\" :\r\n                           (i === 1) ?\r\n                             \"storyImgSide absolute\" :\r\n                             \"storyImgSide\" :\r\n                         (fileArr.length === 1 ? \"storyImgBiger\" : \"\"))}/>\r\n                )) : null\r\n          }\r\n\r\n          {(fileArr !== null && isOpen) ? (\r\n            <Lightbox\r\n              mainSrc={fileArr[photoIndex]}\r\n              nextSrc={fileArr[(photoIndex + 1) % fileArr.length]}\r\n              prevSrc={fileArr[(photoIndex + fileArr.length - 1) % fileArr.length]}\r\n              onCloseRequest={() => this.setState({isOpen: false})}\r\n              onMovePrevRequest={() =>\r\n                this.setState({\r\n                  photoIndex: (photoIndex + fileArr.length - 1) % fileArr.length,\r\n                })\r\n              }\r\n              onMoveNextRequest={() =>\r\n                this.setState({\r\n                  photoIndex: (photoIndex + 1) % fileArr.length,\r\n                })\r\n              }\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n};"]},"metadata":{},"sourceType":"module"}