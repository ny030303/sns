{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\xampp\\\\htdocs\\\\sns\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sns\\\\src\\\\App.js\";\nimport React, { useRef } from 'react';\nimport './App.css';\nimport { BrowserRouter, HashRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport MyHeader from \"./MyHeader/MyHeader\";\nimport MyRightHeader from \"./MyRightHeader/MyRightHeader\";\nimport MainStory from \"./Routes/MainStory/MainStory\";\nimport UserStory from \"./Routes/UserStory/UserStory\";\nimport LoginForm from \"./Routes/LoginForm/LoginForm\";\nimport SignUpForm from \"./Routes/SignUpForm/SignUpForm\";\nimport eventService from \"./services/EventService\";\nimport { getUser, logout } from \"./services/DataService\";\nimport waitDialog from \"./services/WaitDialog\";\nimport { NormalSettingPage } from \"./Routes/NormalSettingPage/NormalSettingPage\";\n\nconst PrivateRoute = (_ref) => {\n  let Component = _ref.component,\n      authed = _ref.authed,\n      rest = _objectWithoutProperties(_ref, [\"component\", \"authed\"]);\n\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: props => authed === true ? React.createElement(Component, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    })) : React.createElement(Redirect, {\n      to: {\n        pathname: '/login',\n        state: {\n          from: props.location\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }));\n};\n\nconst LoginRoute = (_ref2) => {\n  let Component = _ref2.component,\n      authed = _ref2.authed,\n      rest = _objectWithoutProperties(_ref2, [\"component\", \"authed\"]);\n\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: props => authed === true ? React.createElement(Redirect, {\n      to: {\n        pathname: '/',\n        state: {\n          from: props.location\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }) : React.createElement(Component, Object.assign({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }));\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.logout = () => {\n      localStorage.removeItem(\"userInfo\");\n      eventService.emitEvent(\"loginStatus\", false);\n      logout(data => {\n        console.log(data);\n      });\n    };\n\n    this.state = {\n      topMenuHide: false,\n      authed: false\n    };\n    this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n    this.state.authed = this.userInfo ? true : false;\n    eventService.listenEvent('loginStatus', logined => this.setState({\n      authed: logined\n    }));\n    eventService.listenEvent(\"topMenuHide\", visible => {\n      console.log(\"visible: \", visible);\n      this.setState({\n        topMenuHide: visible\n      });\n    });\n  }\n\n  componentDidMount() {\n    getUser(null, null, res => {\n      console.log(res);\n\n      if (res.result === 0) {\n        localStorage.removeItem(\"userInfo\");\n        this.setState({\n          authed: false\n        });\n      }\n    }); // waitDialog.show();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, !this.state.topMenuHide ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(MyHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(MyRightHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(PrivateRoute, {\n      exact: true,\n      authed: this.state.authed,\n      path: \"/\",\n      component: MainStory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      exact: true,\n      authed: this.state.authed,\n      path: \"/story/:userId/:type\",\n      component: UserStory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"privateRoute\", {\n      exact: true,\n      authed: this.state.authed,\n      path: \"/hashtag/:tag\",\n      component: UserStory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      exact: true,\n      authed: this.state.authed,\n      path: \"/setting\",\n      component: NormalSettingPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(LoginRoute, {\n      exact: true,\n      authed: this.state.authed,\n      path: \"/login\",\n      component: LoginForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: SignUpForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/xampp/htdocs/sns/src/App.js"],"names":["React","useRef","BrowserRouter","HashRouter","Redirect","Route","Switch","MyHeader","MyRightHeader","MainStory","UserStory","LoginForm","SignUpForm","eventService","getUser","logout","waitDialog","NormalSettingPage","PrivateRoute","Component","component","authed","rest","props","pathname","state","from","location","LoginRoute","App","constructor","localStorage","removeItem","emitEvent","data","console","log","topMenuHide","userInfo","JSON","parse","getItem","listenEvent","logined","setState","visible","componentDidMount","res","result","render"],"mappings":"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","sourcesContent":["import React, {useRef} from 'react';\r\nimport './App.css';\r\nimport {BrowserRouter, HashRouter, Redirect, Route, Switch} from 'react-router-dom';\r\nimport MyHeader from \"./MyHeader/MyHeader\";\r\nimport MyRightHeader from \"./MyRightHeader/MyRightHeader\";\r\nimport MainStory from \"./Routes/MainStory/MainStory\";\r\nimport UserStory from \"./Routes/UserStory/UserStory\";\r\nimport LoginForm from \"./Routes/LoginForm/LoginForm\";\r\nimport SignUpForm from \"./Routes/SignUpForm/SignUpForm\";\r\nimport eventService from \"./services/EventService\";\r\nimport {getUser, logout} from \"./services/DataService\";\r\nimport waitDialog from \"./services/WaitDialog\";\r\nimport {NormalSettingPage} from \"./Routes/NormalSettingPage/NormalSettingPage\";\r\n\r\n\r\nconst PrivateRoute = ({component: Component, authed, ...rest}) => (\r\n    <Route\r\n        {...rest}\r\n        render={(props) =>\r\n            (authed === true) ?\r\n                (<Component {...props} />) :\r\n                (<Redirect to={{pathname: '/login', state: {from: props.location}}}/>)\r\n        }/>\r\n);\r\n\r\nconst LoginRoute = ({component: Component, authed, ...rest}) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      (authed === true) ?\r\n        (<Redirect to={{pathname: '/', state: {from: props.location}}}/>) :\r\n        (<Component {...props} />)\r\n    }/>\r\n);\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            topMenuHide: false,\r\n            authed: false\r\n        };\r\n        this.userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        this.state.authed = this.userInfo ? true : false;\r\n\r\n        eventService.listenEvent('loginStatus', logined => this.setState({authed: logined}));\r\n        eventService.listenEvent(\"topMenuHide\", (visible) => {\r\n            console.log(\"visible: \", visible);\r\n            this.setState({topMenuHide: visible});\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        getUser(null, null, res => {\r\n            console.log(res);\r\n            if (res.result === 0) {\r\n                localStorage.removeItem(\"userInfo\");\r\n                this.setState({authed: false});\r\n            }\r\n        });\r\n        // waitDialog.show();\r\n    }\r\n\r\n    logout = () => {\r\n        localStorage.removeItem(\"userInfo\");\r\n        eventService.emitEvent(\"loginStatus\",false);\r\n        logout((data) => {console.log(data)});\r\n    };\r\n\r\n    render() {\r\n    return (\r\n        <div className=\"App\">\r\n            <BrowserRouter>\r\n                {\r\n                    (!this.state.topMenuHide) ? (<div><MyHeader/><MyRightHeader/></div>) : (<div></div>)\r\n                }\r\n                <Switch>\r\n                    <PrivateRoute exact authed={this.state.authed} path=\"/\" component={MainStory}/>\r\n                    <PrivateRoute exact authed={this.state.authed}  path=\"/story/:userId/:type\" component={UserStory}/>\r\n                    <privateRoute exact authed={this.state.authed}  path=\"/hashtag/:tag\" component={UserStory}/>\r\n                    <PrivateRoute exact authed={this.state.authed} path=\"/setting\" component={NormalSettingPage}/>\r\n                    <LoginRoute exact authed={this.state.authed} path=\"/login\" component={LoginForm}/>\r\n                    <Route exact path=\"/signup\" component={SignUpForm}/>\r\n                </Switch>\r\n            </BrowserRouter>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}