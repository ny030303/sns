{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sns\\\\src\\\\Routes\\\\LoginForm\\\\LoginForm.js\";\nimport React from 'react';\nimport './LoginForm.css';\nimport eventService from \"../../services/EventService\";\nimport { getUser } from \"../../services/DataService\";\nimport alertDialog from \"../../services/AlertDialog\";\nimport { CheckTag } from \"../../Component/CheckTag/CheckTag\";\n\nconst loadImg = url => {\n  return new Promise((resolve, reject) => {\n    let img = new Image();\n\n    img.onload = () => resolve(img);\n\n    img.onerror = () => reject(null);\n\n    img.src = url;\n  });\n};\n\nconst createImgDataUrl = async url => {\n  let img = await loadImg(url);\n\n  if (img !== null) {\n    let canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"width\", img.width);\n    canvas.setAttribute(\"height\", img.height);\n    let ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    return canvas.toDataURL();\n  }\n\n  return null;\n};\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.gotoSignup = () => {\n      this.props.history.push(\"/signup\");\n    };\n\n    this.changeId = e => this.setState({\n      userId: e.target.value\n    });\n\n    this.changePwd = e => this.setState({\n      userPwd: e.target.value\n    });\n\n    this.login = () => {\n      if (this.state.userId === \"\" || this.state.userPwd === \"\") {\n        alertDialog.show(\"알림!\", \"값을 확인해 주시기 바랍니다.\");\n        return;\n      }\n\n      getUser(this.state.userId, this.state.userPwd, data => {\n        console.log(\"login getuser: \", data);\n\n        if (data.result) {\n          localStorage.setItem(\"userInfo\", JSON.stringify(data.user));\n          eventService.emitEvent(\"loginStatus\", true);\n          alertDialog.show(\"로그인\", `반갑습니다 ${data.user.name}님`);\n          this.props.history.push(\"/\");\n        } else {\n          alertDialog.show(\"로그인 오류!\", \"로그인에 실패했습니다.\");\n        }\n      });\n    };\n\n    this.state = {\n      nowBgPage: 0,\n      imgDataUrl: `/images/login/image1.jpg`,\n      userId: \"\",\n      userPwd: \"\"\n    };\n    this.count = null;\n  }\n\n  componentDidMount() {\n    if (window.userInfo !== undefined) this.props.history.push(\"/\");\n    eventService.listenEvent(\"appLogined\", logined => {\n      if (logined) this.props.history.push(\"/\");\n    });\n    eventService.emitEvent(\"topMenuHide\", true);\n    this.count = setInterval(() => {\n      //let page = ;\n      let nextImage = (this.state.nowBgPage + 1) % 4; // console.log(nextImage);\n\n      createImgDataUrl(`/images/login/image${nextImage + 1}.jpg`).then(imgdataurl => {\n        // console.log(imgdataurl)\n        this.setState({\n          nowBgPage: nextImage,\n          imgDataUrl: imgdataurl\n        });\n      }); //if(this.state.nowBgPage > 3) this.setState({nowBgPage:0});\n      // console.log(this.state.nowBgPage);\n    }, 10000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.count);\n    this.setState({\n      imgDataUrl: null\n    });\n    eventService.emitEvent(\"topMenuHide\", false);\n  }\n\n  render() {\n    let mainMsgs = [\"msg01.png\", \"msg02.png\", \"msg03.png\"];\n    return React.createElement(\"div\", {\n      className: \"loginForm\",\n      style: {\n        backgroundImage: `url('${this.state.imgDataUrl}')`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"kakaoHead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"loginLogo\",\n      height: \"30\",\n      className: \"img_logo\",\n      alt: \"kakao\",\n      src: \"/images/login/logo.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"mArticle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      className: \"tit_intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"message\",\n      src: `/images/login/${mainMsgs[this.state.nowBgPage >= 3 ? 2 : this.state.nowBgPage]}`,\n      height: \"93\",\n      className: \"img_intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"login_input_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"tf_g\",\n      placeholder: \"\\uCE74\\uCE74\\uC624\\uACC4\\uC815 (\\uC774\\uBA54\\uC77C \\uB610\\uB294 \\uC804\\uD654\\uBC88\\uD638)\",\n      onChange: this.changeId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"ico_help ico_account\",\n      \"uk-tooltip\": \"title: \\uCE74\\uCE74\\uC624\\uACC4\\uC815\\uC740 \\uCE74\\uCE74\\uC624 \\uC11C\\uBE44\\uC2A4 \\uBC0F \\uC5F0\\uACC4 \\uC11C\\uBE44\\uC2A4\\uB97C \\uC774\\uC6A9\\uD558\\uAE30 \\uC704\\uD558\\uC5EC \\uD544\\uC694\\uD55C \\uB85C\\uADF8\\uC778 \\uACC4\\uC815\\uC785\\uB2C8\\uB2E4.; pos: bottom-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"tf_g\",\n      placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      onChange: this.changePwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"set_login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(CheckTag, {\n      type: \"login\",\n      text: \"\\uB85C\\uADF8\\uC778 \\uC0C1\\uD0DC \\uC720\\uC9C0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"wrap_btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn_g btn_comfirm\",\n      onClick: this.login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"\\uB85C\\uADF8\\uC778\")), React.createElement(\"div\", {\n      className: \"login_signUp_btn_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Don't have an account? \", React.createElement(\"span\", {\n      onClick: this.gotoSignup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Sign up\")))), React.createElement(\"div\", {\n      className: \"login_footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"\\uC774\\uC6A9\\uC57D\\uAD00\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"\\uAC1C\\uC778\\uC815\\uBCF4\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"\\uCC98\\uB9AC\\uBC29\\uCE68\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"\\uC6B4\\uC601\\uC815\\uCC45\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"\\uACE0\\uAC1D\\uC13C\\uD130\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"\\uACF5\\uC9C0\\uC0AC\\uD56D\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"\\uD55C\\uAD6D\\uC5B4\")), React.createElement(\"div\", {\n      className: \"txt_copyright\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Copyright \\xA9 Kakao Corp. All rights reserved.\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:/xampp/htdocs/sns/src/Routes/LoginForm/LoginForm.js"],"names":["React","eventService","getUser","alertDialog","CheckTag","loadImg","url","Promise","resolve","reject","img","Image","onload","onerror","src","createImgDataUrl","canvas","document","createElement","setAttribute","width","height","ctx","getContext","drawImage","toDataURL","LoginForm","Component","constructor","props","gotoSignup","history","push","changeId","e","setState","userId","target","value","changePwd","userPwd","login","state","show","data","console","log","result","localStorage","setItem","JSON","stringify","user","emitEvent","name","nowBgPage","imgDataUrl","count","componentDidMount","window","userInfo","undefined","listenEvent","logined","setInterval","nextImage","then","imgdataurl","componentWillUnmount","clearInterval","render","mainMsgs","backgroundImage"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './LoginForm.css';\r\nimport eventService from \"../../services/EventService\";\r\nimport {getUser} from \"../../services/DataService\";\r\nimport alertDialog from \"../../services/AlertDialog\";\r\nimport {CheckTag} from \"../../Component/CheckTag/CheckTag\";\r\n\r\nconst loadImg = (url) => {\r\n    return new Promise((resolve, reject) => {\r\n        let img = new Image();\r\n        img.onload = () => resolve(img);\r\n        img.onerror = () => reject(null);\r\n        img.src = url;\r\n    });\r\n};\r\n\r\n\r\nconst createImgDataUrl = async (url) => {\r\n    let img = await loadImg(url);\r\n    if (img !== null) {\r\n        let canvas = document.createElement(\"canvas\");\r\n        canvas.setAttribute(\"width\", img.width);\r\n        canvas.setAttribute(\"height\", img.height);\r\n        let ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(img, 0, 0);\r\n        return canvas.toDataURL();\r\n    }\r\n    return null;\r\n};\r\n\r\nclass LoginForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            nowBgPage: 0,\r\n            imgDataUrl: `/images/login/image1.jpg`,\r\n            userId: \"\",\r\n            userPwd: \"\",\r\n        };\r\n        this.count = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(window.userInfo !== undefined) this.props.history.push(\"/\");\r\n        eventService.listenEvent(\"appLogined\", logined => {\r\n            if( logined ) this.props.history.push(\"/\");\r\n        });\r\n\r\n        eventService.emitEvent(\"topMenuHide\", true);\r\n        this.count = setInterval(() => {\r\n            //let page = ;\r\n            let nextImage = (this.state.nowBgPage + 1) % 4;\r\n            // console.log(nextImage);\r\n            createImgDataUrl(`/images/login/image${nextImage+1}.jpg`).then(imgdataurl => {\r\n                // console.log(imgdataurl)\r\n                this.setState({nowBgPage: nextImage, imgDataUrl: imgdataurl});\r\n            })\r\n\r\n            //if(this.state.nowBgPage > 3) this.setState({nowBgPage:0});\r\n            // console.log(this.state.nowBgPage);\r\n        }, 10000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.count);\r\n        this.setState({imgDataUrl: null});\r\n        eventService.emitEvent(\"topMenuHide\", false);\r\n    }\r\n\r\n    gotoSignup = () => {\r\n        this.props.history.push(\"/signup\")\r\n    };\r\n\r\n\r\n    changeId = (e) => this.setState({userId: e.target.value});\r\n    changePwd = (e) => this.setState({userPwd: e.target.value});\r\n\r\n    login = () => {\r\n        if (this.state.userId === \"\" || this.state.userPwd === \"\") {\r\n            alertDialog.show(\"알림!\", \"값을 확인해 주시기 바랍니다.\");\r\n            return;\r\n        }\r\n\r\n        getUser(this.state.userId, this.state.userPwd, (data) => {\r\n            console.log(\"login getuser: \", data);\r\n            if(data.result) {\r\n                localStorage.setItem(\"userInfo\", JSON.stringify(data.user));\r\n                eventService.emitEvent(\"loginStatus\", true);\r\n                alertDialog.show(\"로그인\", `반갑습니다 ${data.user.name}님`);\r\n                this.props.history.push(\"/\");\r\n            } else {\r\n                alertDialog.show(\"로그인 오류!\", \"로그인에 실패했습니다.\");\r\n            }\r\n\r\n        });\r\n    };\r\n\r\n    render() {\r\n        let mainMsgs = [\"msg01.png\", \"msg02.png\", \"msg03.png\"];\r\n        return (\r\n            <div className=\"loginForm\" style={{backgroundImage: `url('${this.state.imgDataUrl}')`}}>\r\n                <div className=\"kakaoHead\">\r\n                    <img id=\"loginLogo\" height=\"30\" className=\"img_logo\" alt=\"kakao\"\r\n                         src=\"/images/login/logo.png\"/>\r\n                </div>\r\n                <div id=\"mArticle\">\r\n                    <strong className=\"tit_intro\">\r\n                        <img id=\"message\"\r\n                             src={`/images/login/${mainMsgs[(this.state.nowBgPage >= 3) ? 2 : this.state.nowBgPage]}`}\r\n                             height=\"93\" className=\"img_intro\"/>\r\n                    </strong>\r\n                    <div className=\"login_input_wrap\">\r\n                        <input type=\"text\" className=\"tf_g\" placeholder=\"카카오계정 (이메일 또는 전화번호)\" onChange={this.changeId}/>\r\n                        {/*<span className=\"ico_help ico_account\"*/}\r\n                        {/*      uk-tooltip=\"title: 넌 평소 로그아웃을 소중히 여기지 않았지... 그 댓가를 치루게 될거야.; pos: bottom-right\"/>*/}\r\n                        <span className=\"ico_help ico_account\"\r\n                              uk-tooltip=\"title: 카카오계정은 카카오 서비스 및 연계 서비스를 이용하기 위하여 필요한 로그인 계정입니다.; pos: bottom-right\"/>\r\n                        <input type=\"password\" className=\"tf_g\" placeholder=\"비밀번호\" onChange={this.changePwd}/>\r\n                    </div>\r\n                    <div className=\"set_login\">\r\n                        <CheckTag type=\"login\" text=\"로그인 상태 유지\"/>\r\n                    </div>\r\n\r\n                    <div className=\"wrap_btn\">\r\n                        <button className=\"btn_g btn_comfirm\" onClick={this.login}>로그인</button>\r\n                    </div>\r\n                    <div className=\"login_signUp_btn_wrap\">\r\n                        <div>Don't have an account? <span onClick={this.gotoSignup}>Sign up</span></div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"login_footer\">\r\n                    <ul>\r\n                        <li>이용약관</li>\r\n                        <li>개인정보</li>\r\n                        <li>처리방침</li>\r\n                        <li>운영정책</li>\r\n                        <li>고객센터</li>\r\n                        <li>공지사항</li>\r\n                        <li>한국어</li>\r\n                    </ul>\r\n                    <div className=\"txt_copyright\">Copyright © Kakao Corp. All rights reserved.</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginForm;\r\n"]},"metadata":{},"sourceType":"module"}