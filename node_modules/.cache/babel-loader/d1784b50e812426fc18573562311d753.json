{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sns\\\\src\\\\Component\\\\StoryItem\\\\StoryItemTail\\\\StoryItemTail.js\";\nimport * as React from 'react';\nimport { MyMenu } from \"../../MyMenu/MyMenu\";\nimport Lightbox from \"react-image-lightbox\";\nimport { addPostFeeling, deletePostFeeling, getPostFeeling } from \"../../../services/DataService\";\nexport default class StoryItemTail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.loadFeelings = () => {\n      getPostFeeling(this.props.postData.id, cData => {\n        // console.log(\"loadFeelings:\", cData);\n        // console.log(this.state.feelings);\n        if (Array.isArray(cData.data)) {\n          this.setState({\n            feelings: cData.data.map(v => JSON.parse(v))\n          });\n          console.log(this.state.feelings);\n          this.state.feelings.forEach((v, i) => {\n            if (v.userid === this.nowUserInfo.id) {\n              this.setState({\n                feelIconClass: v.feeling\n              });\n            }\n          });\n        } else {\n          this.setState({\n            feelings: JSON.parse(cData.data)\n          });\n          console.log(this.state.feelings);\n\n          if (this.state.feelings.userid === this.nowUserInfo.id) {\n            this.setState({\n              feelIconClass: this.state.feelings.feeling\n            });\n          }\n        }\n\n        this.setState({\n          feelingCnt: this.state.feelings.length\n        });\n        this.props.onFeelingCnt(this.state.feelingCnt);\n      });\n    };\n\n    this.feelIconEvent = e => {\n      let fnum = e.target.dataset.fnum;\n      this.setState({\n        feelIconClass: this.feelIcons[fnum]\n      });\n      this.addFeelingToPost(this.feelIcons[fnum]);\n    };\n\n    this.nowFeelIconEvent = () => {\n      if (this.state.feelIconClass === \"\") {\n        this.setState({\n          feelIconClass: \"bn_like\"\n        });\n        this.addFeelingToPost(\"bn_like\");\n      } else {\n        this.setState({\n          feelIconClass: \"\"\n        });\n        this.deleteFeelingToPost(this.state.feelIconClass);\n      }\n    };\n\n    this.deleteFeelingToPost = feeling => {\n      this.setState({\n        feelingCnt: this.state.feelingCnt -= 1\n      });\n      this.props.onFeelingCnt(this.state.feelingCnt);\n      let data = {\n        postid: this.props.postData.id,\n        feelingInfo: JSON.stringify({\n          userid: this.nowUserInfo.id,\n          feeling: feeling\n        })\n      };\n      deletePostFeeling(data, res => {});\n    };\n\n    this.addFeelingToPost = feeling => {\n      this.setState({\n        feelingCnt: this.state.feelingCnt += 1\n      });\n      this.props.onFeelingCnt(this.state.feelingCnt);\n      let data = {\n        postid: this.props.postData.id,\n        feelingInfo: JSON.stringify({\n          userid: this.nowUserInfo.id,\n          feeling: feeling\n        })\n      };\n      addPostFeeling(data, res => {});\n    };\n\n    this.state = {\n      feelIconClass: \"\",\n      feelingCnt: 0\n    };\n    this.feelIcons = [\"bn_feel\", \"bn_like\", \"bn_pleasure\", \"bn_sad\", \"bn_cheerup\", \"bn_good\"];\n    this.nowUserInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  }\n\n  componentDidMount() {\n    this.loadFeelings();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.state) {// console.log(prevState.state);\n    }\n\n    if (prevState.state && this.state.feelings !== prevState.state.feelings) {\n      this.loadFeelings();\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"storyContentsWrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"storyitem_icon_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: this.nowFeelIconEvent,\n      className: `ico_ks2 bn_feel ${this.state.feelIconClass}`,\n      id: \"nowFeelIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), this.state.feelIconClass !== \"\" ? null : React.createElement(\"div\", {\n      className: \"selectFeelIcons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: this.feelIconEvent,\n      className: \"ico_ks2 bn_like selectFeelIconStyle\",\n      \"data-fnum\": \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      onClick: this.feelIconEvent,\n      className: \"ico_ks2 bn_pleasure selectFeelIconStyle\",\n      \"data-fnum\": \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      onClick: this.feelIconEvent,\n      className: \"ico_ks2 bn_sad selectFeelIconStyle\",\n      \"data-fnum\": \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      onClick: this.feelIconEvent,\n      className: \"ico_ks2 bn_cheerup selectFeelIconStyle\",\n      \"data-fnum\": \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      onClick: this.feelIconEvent,\n      className: \"ico_ks2 bn_good selectFeelIconStyle\",\n      \"data-fnum\": \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"ico_ks2 bn_share\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ico_ks2 bn_up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"relative feelingUserIconWrap\",\n      style: {\n        display: \"inline-block\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.state.feelIconClass !== \"\" ? this.nowUserInfo.profileimg == null ? React.createElement(\"div\", {\n      className: \"storyItem_feeling_user_img_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"img_profile storyItem_frame_g\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: this.state.feelIconClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      className: \"storyItem_feeling_user_img_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"img_profile storyItem_feeling_user_img\",\n      style: {\n        backgroundImage: `url(${this.nowUserInfo.profileimg})`\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: this.state.feelIconClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })) : null, this.state.feelingCnt <= 0 ? null : this.state.feelIconClass !== \"\" ? React.createElement(\"div\", {\n      className: \"bn_morelike\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"+\", this.state.feelingCnt - 1) : React.createElement(\"div\", {\n      className: \"bn_morelike\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"+\", this.state.feelingCnt)))));\n  }\n\n}\n;","map":{"version":3,"sources":["C:/xampp/htdocs/sns/src/Component/StoryItem/StoryItemTail/StoryItemTail.js"],"names":["React","MyMenu","Lightbox","addPostFeeling","deletePostFeeling","getPostFeeling","StoryItemTail","Component","constructor","props","loadFeelings","postData","id","cData","Array","isArray","data","setState","feelings","map","v","JSON","parse","console","log","state","forEach","i","userid","nowUserInfo","feelIconClass","feeling","feelingCnt","length","onFeelingCnt","feelIconEvent","e","fnum","target","dataset","feelIcons","addFeelingToPost","nowFeelIconEvent","deleteFeelingToPost","postid","feelingInfo","stringify","res","localStorage","getItem","componentDidMount","componentDidUpdate","prevProps","prevState","snapshot","render","display","profileimg","backgroundImage"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {MyMenu} from \"../../MyMenu/MyMenu\";\r\nimport Lightbox from \"react-image-lightbox\";\r\nimport {addPostFeeling, deletePostFeeling, getPostFeeling} from \"../../../services/DataService\";\r\n\r\nexport default class StoryItemTail extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      feelIconClass: \"\",\r\n      feelingCnt: 0\r\n    };\r\n    this.feelIcons = [\r\n      \"bn_feel\",\r\n      \"bn_like\",\r\n      \"bn_pleasure\",\r\n      \"bn_sad\",\r\n      \"bn_cheerup\",\r\n      \"bn_good\",\r\n    ];\r\n    this.nowUserInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    this.loadFeelings();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevState.state) {\r\n      // console.log(prevState.state);\r\n    }\r\n    if (prevState.state && this.state.feelings !== prevState.state.feelings) {\r\n      this.loadFeelings();\r\n    }\r\n  }\r\n\r\n  loadFeelings = () => {\r\n    getPostFeeling(this.props.postData.id, (cData) => {\r\n      // console.log(\"loadFeelings:\", cData);\r\n      // console.log(this.state.feelings);\r\n      if(Array.isArray(cData.data)) {\r\n        this.setState({feelings: cData.data.map(v => JSON.parse(v))});\r\n        console.log(this.state.feelings);\r\n        this.state.feelings.forEach((v,i) => {\r\n          if(v.userid === this.nowUserInfo.id) {\r\n            this.setState({feelIconClass: v.feeling});\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({feelings: JSON.parse(cData.data)});\r\n        console.log(this.state.feelings);\r\n        if(this.state.feelings.userid === this.nowUserInfo.id) {\r\n          this.setState({feelIconClass: this.state.feelings.feeling});\r\n        }\r\n      }\r\n      this.setState({feelingCnt: this.state.feelings.length});\r\n      this.props.onFeelingCnt(this.state.feelingCnt);\r\n    });\r\n  };\r\n\r\n\r\n  feelIconEvent = (e) => {\r\n    let fnum = e.target.dataset.fnum;\r\n    this.setState({feelIconClass: this.feelIcons[fnum]});\r\n    this.addFeelingToPost(this.feelIcons[fnum]);\r\n  };\r\n\r\n  nowFeelIconEvent = () => {\r\n    if(this.state.feelIconClass === \"\") {\r\n      this.setState({feelIconClass:  \"bn_like\"});\r\n      this.addFeelingToPost(\"bn_like\");\r\n    } else {\r\n      this.setState({feelIconClass:  \"\"});\r\n      this.deleteFeelingToPost(this.state.feelIconClass);\r\n    }\r\n  };\r\n\r\n  deleteFeelingToPost = (feeling) => {\r\n    this.setState({feelingCnt: this.state.feelingCnt -=1});\r\n    this.props.onFeelingCnt(this.state.feelingCnt);\r\n    let data = {\r\n      postid: this.props.postData.id,\r\n      feelingInfo: JSON.stringify({userid:this.nowUserInfo.id, feeling: feeling})\r\n    };\r\n\r\n    deletePostFeeling(data, (res) => {\r\n\r\n    });\r\n  };\r\n\r\n  addFeelingToPost = (feeling) => {\r\n    this.setState({feelingCnt: this.state.feelingCnt +=1});\r\n    this.props.onFeelingCnt(this.state.feelingCnt);\r\n    let data = {\r\n      postid: this.props.postData.id,\r\n      feelingInfo: JSON.stringify({userid:this.nowUserInfo.id, feeling: feeling})\r\n    };\r\n    addPostFeeling(data, (res) => {\r\n\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"storyContentsWrap\">\r\n          <div className=\"storyitem_icon_wrap\">\r\n            <div onClick={this.nowFeelIconEvent} className={`ico_ks2 bn_feel ${this.state.feelIconClass}`}\r\n                 id=\"nowFeelIcon\"/>\r\n            {\r\n              this.state.feelIconClass !== \"\" ? null : (\r\n                <div className=\"selectFeelIcons\">\r\n                  <div onClick={this.feelIconEvent} className=\"ico_ks2 bn_like selectFeelIconStyle\" data-fnum=\"1\"/>\r\n                  <div onClick={this.feelIconEvent} className=\"ico_ks2 bn_pleasure selectFeelIconStyle\" data-fnum=\"2\"/>\r\n                  <div onClick={this.feelIconEvent} className=\"ico_ks2 bn_sad selectFeelIconStyle\" data-fnum=\"3\"/>\r\n                  <div onClick={this.feelIconEvent} className=\"ico_ks2 bn_cheerup selectFeelIconStyle\" data-fnum=\"4\"/>\r\n                  <div onClick={this.feelIconEvent} className=\"ico_ks2 bn_good selectFeelIconStyle\" data-fnum=\"5\"/>\r\n                </div>\r\n              )\r\n            }\r\n\r\n            <div className=\"ico_ks2 bn_share\"/>\r\n            <div className=\"ico_ks2 bn_up\"/>\r\n            <div className=\"relative feelingUserIconWrap\" style={{display: \"inline-block\"}}>\r\n              {\r\n                (this.state.feelIconClass !== \"\") ? (this.nowUserInfo.profileimg == null) ?\r\n                  (<div className=\"storyItem_feeling_user_img_wrap\">\r\n                    <span className=\"img_profile storyItem_frame_g\"/>\r\n                    <span className={this.state.feelIconClass}/>\r\n                  </div>) :\r\n                  (<div className=\"storyItem_feeling_user_img_wrap\">\r\n                    <span className=\"img_profile storyItem_feeling_user_img\" style={{backgroundImage: `url(${this.nowUserInfo.profileimg})`}}/>\r\n                    <span className={this.state.feelIconClass}/>\r\n                  </div>) : null\r\n              }\r\n              {\r\n                (this.state.feelingCnt <=0) ? null : (this.state.feelIconClass !== \"\") ? (<div className=\"bn_morelike\">+{this.state.feelingCnt-1}</div>) : (<div className=\"bn_morelike\">+{this.state.feelingCnt}</div>)\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n};"]},"metadata":{},"sourceType":"module"}